/*! shade 1.0.0 2014-09-05 */
(function(i){"function"==typeof define&&define.amd?define(["$","velocity"],i):i(window.Zepto||window.jQuery)})(function(i,t){function o(i,t){this._init(i,t)}var n="shade",s=function(){};return o.VERSION="1.0.0",o.DEFAULTS={cover:document.body,color:"black",opacity:"0.25",duration:150,easing:"swing",padding:0,zIndex:1,click:function(){this.close()},open:s,opened:s,close:s,closed:s},o.prototype._init=function(t,n){var s=this;this.options=i.extend(!0,{},o.DEFAULTS,n),this.$element=i(t),this.isBody=i(this.options.cover).is("body"),this.$shade=i("<div />").addClass("shade").css({background:this.options.color?this.options.color:"",opacity:0}).hide().on("click",function(){s.options.click.call(s)}).insertAfter(this.$element),i(window).on("resize:shade",function(){s.$shade.hasClass("shade--is-open")&&s.setPosition.call(s)})},o.prototype.open=function(){var i=this;this._trigger("open"),this.setPosition(),t.animate(this.$shade,{opacity:this.options.opacity},{display:"block",duration:this.options.duration,easing:this.options.easing,complete:function(){i.$shade.addClass("shade--is-open").on("touchmove",function(){return!1}),i._trigger("opened")}})},o.prototype.close=function(){var i=this;this._trigger("close"),t.animate(this.$shade,"reverse",{display:"none",duration:this.options.duration,easing:this.options.easing,complete:function(){i.$shade.removeClass("shade--is-open").off("touchmove"),i._trigger("closed")}})},o.prototype.setPosition=function(){var i=this.$element,t=this.isBody?"auto":i.outerWidth(!1),o=this.isBody?"auto":i.outerHeight(!1),n=this.isBody?"fixed":"absolute";this.$shade.css({left:this.options.padding?-this.options.padding:0,top:this.options.padding?-this.options.padding:0,bottom:this.options.padding?-this.options.padding:0,right:this.options.padding?-this.options.padding:0,width:this.options.padding?t-this.options.padding:t,height:this.options.padding?o-this.options.padding:o,position:n,padding:this.options.padding,zIndex:this.options.zIndex||i.css("zIndex")+1})},o.prototype._trigger=function(t,o){t in this.options&&this.options[t].call(this,i.Event(n+":"+t,{bubbles:!1}),o)},i.fn.shade=function(t){var s=Array.prototype.slice.call(arguments);return this.each(function(){var e=i(this),d=e.data(n),a="string"==typeof t;if(!d){if(a)throw'cannot call methods on shade prior to initialization; attempted to call method "'+t+'"';e.data(n,d=new o(this,t))}if(a){if("_"===t.charAt(0)||"function"!=typeof d[t])throw'no such method "'+t+'" for shade';d[t].apply(d,s.length>1?s.slice(1):null)}})},i.fn.shade.Constructor=o,i});